---
// TilesGrid.astro
import Tile from "./Tile.astro";
import { Users, CreditCard, FileText, Leaf } from "@lucide/astro";
---

<section class="tiles">
  <div class="tiles__header">
    <h2 class="tiles__title">Entdecken Sie unsere Kategorien</h2>
    <p class="tiles__description">
      Wählen Sie eine Kategorie aus, um detaillierte Anleitungen und
      Hilfestellungen zu erhalten. Wählen Sie eine Kategorie aus, um
      detaillierte Anleitungen und Hilfestellungen zu erhalten.
    </p>
  </div>

  <div class="tiles__grid">
    <div class="tile-wrapper animate-on-scroll">
      <Tile
        href="/mitglieder"
        title="Mitglieder"
        description="Verwaltung von Mitgliederdaten und Profile"
        tone="green"
        size="lg"
        mainIcon={Users}
        badgeIcon={Users}
      />
    </div>

    <div class="tile-wrapper animate-on-scroll">
      <Tile
        href="/zahlungen"
        title="Zahlungen"
        description="Beiträge und Transaktionen verwalten"
        tone="mint"
        size="sm"
        mainIcon={CreditCard}
        badgeIcon={CreditCard}
      />
    </div>

    <div class="tile-wrapper animate-on-scroll">
      <Tile
        href="/rechnungen"
        title="Rechnungen"
        description="Rechnungserstellung und Verwaltung"
        tone="light"
        size="sm"
        mainIcon={FileText}
        badgeIcon={FileText}
      />
    </div>

    <div class="tile-wrapper animate-on-scroll">
      <Tile
        href="/berichte"
        title="Berichte"
        description="Analysen, Reports und Statistiken erstellen"
        tone="dark"
        size="wide"
        mainIcon={Leaf}
        badgeIcon={Leaf}
      />
    </div>
  </div>
</section>

<style>
  .tiles {
    padding: 4rem 0;
  }

  .tiles__header {
    text-align: center;
    max-width: 700px;
    margin: 0 auto 3rem 20px;
  }

  .tiles__title {
    font-size: var(--fs-h2);
    font-weight: 700;
    color: var(--color-black);
    margin-bottom: 0.75rem;
  }

  .tiles__description {
    font-size: var(--fs-p);
    color: var(--color-black);
    opacity: 0.8;
    line-height: 1.6;
  }

  .tiles__grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    grid-template-rows: auto auto;
    gap: 18px;
    align-items: stretch;
  }

  /* Tile Wrapper für Animation */
  .tile-wrapper {
    height: 100%;
  }

  .animate-on-scroll {
    opacity: 0;
    transform: translateY(50px);
    transition:
      opacity 0.8s ease-out,
      transform 0.8s ease-out;
  }

  .animate-on-scroll.show {
    opacity: 1;
    transform: translateY(0);
  }

  /* Gestaffelte Verzögerungen */
  .tile-wrapper:nth-child(1) .animate-on-scroll.show,
  .tile-wrapper:nth-child(1).show {
    transition-delay: 0.1s;
  }

  .tile-wrapper:nth-child(2) .animate-on-scroll.show,
  .tile-wrapper:nth-child(2).show {
    transition-delay: 0.2s;
  }

  .tile-wrapper:nth-child(3) .animate-on-scroll.show,
  .tile-wrapper:nth-child(3).show {
    transition-delay: 0.3s;
  }

  .tile-wrapper:nth-child(4) .animate-on-scroll.show,
  .tile-wrapper:nth-child(4).show {
    transition-delay: 0.4s;
  }

  .tiles__grid :global(.tile-wrapper:nth-child(1)) {
    grid-column: 1;
    grid-row: 1 / 3;
  }

  .tiles__grid :global(.tile-wrapper:nth-child(4)) {
    grid-column: 2 / 4;
  }

  /* Responsive */
  @media (max-width: 900px) {
    .tiles {
      padding: 2rem 0;
    }

    .tiles__header {
      margin-bottom: 2rem;
    }

    .tiles__title {
      font-size: var(--fs-h2-m);
    }

    .tiles__description {
      font-size: var(--fs-p-m);
    }

    .tiles__grid {
      grid-template-columns: 1fr;
    }

    .tiles__grid :global(.tile-wrapper:nth-child(4)) {
      grid-column: auto;
    }
  }
</style>

<script>
  // Intersection Observer Setup (Web Dev Simplified Methode)
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
      }
    });
  });

  const animatedElements = document.querySelectorAll(".animate-on-scroll");
  animatedElements.forEach((el) => observer.observe(el));
</script>
