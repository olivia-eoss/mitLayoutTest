---
// Tile.astro
export interface Props {
  title: string;
  description?: string;
  href: string;

  tone?: "green" | "mint" | "light" | "dark";
  size?: "lg" | "sm" | "wide";

  mainIcon?: any; // grosses Icon (Illustration)
  badgeIcon?: any; // kleines Icon im Chip
}

const {
  title,
  description,
  href,
  tone = "light",
  size = "sm",
  mainIcon: MainIcon,
  badgeIcon: BadgeIcon,
} = Astro.props;
---

<a class={`tile tile--${tone} tile--${size}`} href={href}>
  {/* grosses Icon */}
  {
    MainIcon && (
      <span class="tile__mainIcon" aria-hidden="true">
        <MainIcon />
      </span>
    )
  }

  <div class="tile__footer">
    {/* kleines Icon */}
    {
      BadgeIcon && (
        <span class="tile__badgeIcon" aria-hidden="true">
          <BadgeIcon />
        </span>
      )
    }

    <div class="tile__text">
      <h3 class="tile__title">{title}</h3>
      {description && <p class="tile__desc">{description}</p>}
    </div>
  </div>
</a>

<style>
  /* Basis */
  .tile {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    border-radius: 22px;
    padding: var(--tile-pad);
    min-height: var(--tile-minh);

    text-decoration: none;
    box-shadow: 0 10px 26px rgba(0, 0, 0, 0.1);
    transition:
      transform 0.18s ease,
      box-shadow 0.18s ease;
    overflow: hidden;
  }
  .tile:hover {
    transform: translateY(-2px);
    box-shadow: 0 14px 34px rgba(0, 0, 0, 0.14);
  }

  /* Footer (Badge + Text) */
  .tile__footer {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: auto;
    z-index: 2;
  }

  .tile__badgeIcon {
    width: var(--badge-size);
    height: var(--badge-size);
    border-radius: 14px;
    display: grid;
    place-items: center;
    background: var(--badge-bg);
    color: var(--badge-fg);
    flex: 0 0 auto;
  }
  .tile__badgeIcon :global(svg) {
    width: calc(var(--badge-size) * 0.55);
    height: calc(var(--badge-size) * 0.55);
  }

  .tile__title {
    margin: 0;
    font-size: var(--title-size);
    line-height: 1.1;
    color: var(--title-fg);
    font-weight: 800;
  }
  .tile__desc {
    margin: 6px 0 0;
    color: var(--desc-fg);
    font-size: var(--desc-size);
    line-height: 1.3;
  }

  /* Grosses Icon */
  .tile__mainIcon {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: start center; /* ⬅️ oben + zentriert */
    padding-top: 32px;
    opacity: var(--mainicon-opacity);
    color: var(--mainicon-fg);
    z-index: 1;
    pointer-events: none;
  }
  .tile__mainIcon :global(svg) {
    width: var(--mainicon-size);
    height: var(--mainicon-size);
    stroke-width: var(--mainicon-stroke);
  }

  /* ---------- Size Varianten (hier wird die Icon-Grösse “angepasst”) ---------- */
  .tile--lg {
    --tile-pad: 40px;
    --tile-minh: 320px;
    --mainicon-size: 200px;
    --mainicon-stroke: 2.2;
    --mainicon-opacity: 0.2;
    --badge-size: 42px;
    --title-size: 34px;
    --desc-size: 14px;
  }

  .tile--sm {
    --tile-pad: 32px;
    --tile-minh: 230px;
    --mainicon-size: 78px;
    --mainicon-stroke: 2;
    --mainicon-opacity: 0.18;
    --badge-size: 34px;
    --title-size: 20px;
    --desc-size: 12px;
  }

  .tile--wide {
    --tile-pad: 26px;
    --tile-minh: 150px;
    --mainicon-size: 110px;
    --mainicon-stroke: 2.2;
    --mainicon-opacity: 0.22;
    --badge-size: 38px;
    --title-size: 26px;
    --desc-size: 13px;
  }

  /*Farben Varianten*/
  .tile--green {
    background: var(--color-green);
    --title-fg: var(--color-white);
    --desc-fg: var(--color-white);
    --mainicon-fg: var(--color-white);
    --badge-bg: var(--color-black);
    --badge-fg: var(--color-white);
  }

  .tile--mint {
    background: var(--color-green-46);
    --title-fg: var(--color-black);
    --desc-fg: var(--color-black);
    --mainicon-fg: var(--color-green);
    --badge-bg: var(--color-green-46);
    --badge-fg: var(--color-green);
  }

  .tile--light {
    background: var(--color-grey-100);
    --title-fg: var(--color-black);
    --desc-fg: var(--color-black);
    --mainicon-fg: var(--color-black);

    --badge-bg: var(--color-green-46);
    --badge-fg: var(--color-green);
  }

  .tile--dark {
    background: var(--color-black);
    --title-fg: var(--color-white);
    --desc-fg: var(--color-white);
    --mainicon-fg: var(--color-green);

    --badge-bg: var(--color-green);
    --badge-fg: var(--color-white);
  }
</style>
